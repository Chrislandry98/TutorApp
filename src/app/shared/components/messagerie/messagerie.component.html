<div class="container py-4">
    <h1 class="h4 fw-bold mb-3">
        <i class="bi bi-bell me-2"></i> Centre de Notifications ({{ unreadCount }} non lu(s))
    </h1>
    
    <div class="d-flex justify-content-end mb-4">
        <button class="btn btn-sm btn-outline-secondary" (click)="markAllAsRead()" [disabled]="unreadCount === 0">
            <i class="bi bi-check-all me-1"></i> Marquer tout comme lu
        </button>
    </div>

    <div *ngIf="notifications.length > 0; else noNotifications">
        <div class="list-group">
            <div *ngFor="let notification of notifications" 
                 class="list-group-item p-3 mb-2 shadow-sm rounded-3 d-flex align-items-center justify-content-between"
                 [class.bg-light]="!notification.isRead"
                 [class]="getTypeClass(notification.type)">
                
                <div class="d-flex align-items-start flex-grow-1" 
                     (click)="goToNotificationLink(notification)" 
                     style="cursor: pointer;">
                    
                    <div class="flex-grow-1 me-3">
                        <span class="small me-2 text-muted fw-bold">{{ notification.type | uppercase }}</span>
                        <p class="mb-1" [class.fw-bold]="!notification.isRead">
                            <i class="bi me-2" 
                               [class.bi-patch-check-fill]="notification.type === 'action'"
                               [class.bi-currency-dollar]="notification.type === 'event'"
                               [class.bi-exclamation-triangle-fill]="notification.type === 'alert'"
                               [class.bi-info-circle-fill]="notification.type === 'info'"
                               [class.text-primary]="notification.type === 'action'"
                               [class.text-success]="notification.type === 'event'"
                               [class.text-danger]="notification.type === 'alert'">
                            </i>
                            {{ notification.message }}
                        </p>
                    </div>

                    <small class="text-muted text-end ms-3 d-flex flex-column align-self-center">
                        {{ notification.timestamp | date:'shortTime' }}
                        <span *ngIf="!notification.isRead" class="badge bg-warning mt-1">Nouveau</span>
                    </small>
                </div>
                
                <button class="btn btn-sm btn-outline-secondary ms-3" (click)="deleteNotification(notification.id)" title="Supprimer">
                    <i class="bi bi-trash"></i>
                </button>
                
            </div>
        </div>
    </div>

    <ng-template #noNotifications>
        <div class="alert alert-secondary text-center">
            Vous êtes à jour ! Aucune nouvelle notification.
        </div>
    </ng-template>

</div>