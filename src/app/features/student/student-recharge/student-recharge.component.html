<div class="recharge-page container-fluid py-4">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6"> 

      <div class="mb-4">
        <a routerLink="/student/dashboard" class="btn btn-sm btn-outline-secondary back-to-dashboard-btn">
            <i class="bi bi-arrow-left me-1"></i> Back to Dashboard
        </a>
      </div>

      <div class="card p-4 shadow-sm">
        <div class="card-header bg-white border-0 p-0 mb-4">
          <h4 class="fw-bold mb-0">
            <i class="bi bi-credit-card me-2 text-primary"></i> Recharge Account
          </h4>
        </div>
        
        <form (ngSubmit)="submitRecharge()">
          
          <div class="current-balance p-3 mb-4 rounded">
            <div class="d-flex justify-content-between align-items-center">
              <span class="text-muted">Current Balance</span>
              <span class="fw-bold fs-4 text-primary">
                {{ currentBalance | currency:'USD':'symbol':'1.2-2' }}
              </span>
            </div>
          </div>

          <h5 class="fw-bold mb-3">Select Amount</h5>
          <div class="row g-3 mb-4">
            
            <div class="col-6" *ngFor="let amount of presetAmounts">
              <label class="recharge-option card p-3 h-100" [class.selected]="selectedAmount === amount">
                <input 
                  type="radio" 
                  name="selectedAmount" 
                  [value]="amount" 
                  [(ngModel)]="selectedAmount"
                  (change)="selectPreset(amount)"
                  hidden>
                <span class="fw-bold fs-5">${{ amount }}</span>
              </label>
            </div>

            <div class="col-12">
              <label class="recharge-option custom-amount-option card p-3" [class.selected]="customAmount !== null">
                <input 
                  type="radio" 
                  name="selectedAmount" 
                  [value]="customAmount" 
                  [checked]="customAmount !== null"
                  (change)="customAmount = (customAmount !== null ? customAmount : 1); onCustomAmountChange()"
                  hidden>
                <div class="d-flex justify-content-between align-items-center">
                    <span>Custom Amount</span>
                    <input 
                        type="number" 
                        class="form-control form-control-sm w-50"
                        placeholder="$"
                        [disabled]="customAmount === null"
                        [(ngModel)]="customAmount"
                        name="customAmountInput"
                        (input)="onCustomAmountChange()">
                </div>
              </label>
            </div>
          </div>
          
          <div class="recharge-summary p-3 mb-4 rounded">
            <div class="d-flex justify-content-between mb-2">
              <span class="text-muted">Recharge Amount</span>
              <span class="fw-bold fs-5">{{ selectedAmount | currency:'USD':'symbol':'1.2-2' }}</span>
            </div>
            <div class="d-flex justify-content-between border-top pt-2">
              <span class="fw-bold">New Balance</span>
              <span class="fw-bold fs-4 text-primary">
                {{ newBalance | currency:'USD':'symbol':'1.2-2' }}
              </span>
            </div>
          </div>

          <h5 class="fw-bold mb-3">Payment Method</h5>
          <div class="payment-method card p-3 mb-4">
            <div class="d-flex align-items-center">
              <i class="bi bi-credit-card me-3 fs-4"></i>
              <div>
                <span class="fw-bold d-block">Credit / Debit Card</span>
                <span class="text-muted small">Secure payment processing</span>
              </div>
            </div>
          </div>

          <button 
            type="submit" 
            class="btn btn-primary btn-lg w-100" 
            [disabled]="selectedAmount <= 0">
            Recharge {{ selectedAmount | currency:'USD':'symbol':'1.0-0' }}
          </button>
          
          <p class="text-center text-muted small mt-2">
            Your payment information is secure and encrypted
          </p>

        </form>
      </div>
    </div>
  </div>
</div>
